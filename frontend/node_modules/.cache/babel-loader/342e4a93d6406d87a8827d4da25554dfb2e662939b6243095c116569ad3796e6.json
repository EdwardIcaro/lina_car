{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const EmployeePage=()=>{const[employees,setEmployees]=useState([]);const[selectedEmployee,setSelectedEmployee]=useState(null);const[orders,setOrders]=useState([]);const statusMap={AWAITING:'Aguardando',WASHING:'Em lavagem',READY:'Pronto',FINISHED:'Finalizado'};useEffect(()=>{fetchEmployees();},[]);const fetchEmployees=async()=>{try{const{data}=await axios.get('/api/employees');setEmployees(data);}catch(err){setEmployees([]);}};const fetchOrders=async employeeId=>{try{const{data}=await axios.get(\"/api/orders?employeeId=\".concat(employeeId));setOrders(data);}catch(err){setOrders([]);}};const handleSelectEmployee=e=>{const empId=e.target.value;setSelectedEmployee(empId);if(empId)fetchOrders(empId);else setOrders([]);};return/*#__PURE__*/_jsxs(\"div\",{className:\"employee-page-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Funcion\\xE1rios\"}),/*#__PURE__*/_jsx(\"label\",{children:\"Selecione um funcion\\xE1rio:\"}),/*#__PURE__*/_jsxs(\"select\",{value:selectedEmployee||'',onChange:handleSelectEmployee,style:{marginBottom:24},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"-- Selecione --\"}),employees.map(emp=>/*#__PURE__*/_jsx(\"option\",{value:emp.id,children:emp.name},emp.id))]}),selectedEmployee&&/*#__PURE__*/_jsxs(\"table\",{className:\"services-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Ve\\xEDculo\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Valor do Servi\\xE7o\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Ganho Funcion\\xE1rio\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:orders.map(order=>{var _order$vehicle,_order$vehicle2;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{children:[(_order$vehicle=order.vehicle)===null||_order$vehicle===void 0?void 0:_order$vehicle.model,\" (\",(_order$vehicle2=order.vehicle)===null||_order$vehicle2===void 0?void 0:_order$vehicle2.plate,\")\"]}),/*#__PURE__*/_jsxs(\"td\",{children:[\"R$ \",order.totalPrice.toFixed(2)]}),/*#__PURE__*/_jsx(\"td\",{children:order.employee?\"R$ \".concat((order.totalPrice*(order.employee.percentage/100)).toFixed(2),\" (\").concat(order.employee.percentage,\"%)\"):'-'}),/*#__PURE__*/_jsx(\"td\",{children:statusMap[order.status]||order.status})]},order.id);})})]})]});};export default EmployeePage;","map":{"version":3,"names":["React","useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","EmployeePage","employees","setEmployees","selectedEmployee","setSelectedEmployee","orders","setOrders","statusMap","AWAITING","WASHING","READY","FINISHED","fetchEmployees","data","get","err","fetchOrders","employeeId","concat","handleSelectEmployee","e","empId","target","value","className","children","onChange","style","marginBottom","map","emp","id","name","order","_order$vehicle","_order$vehicle2","vehicle","model","plate","totalPrice","toFixed","employee","percentage","status"],"sources":["C:/Users/Lenovo/lina_car/frontend/src/pages/EmployeePage.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst EmployeePage = () => {\r\n  const [employees, setEmployees] = useState([]);\r\n  const [selectedEmployee, setSelectedEmployee] = useState(null);\r\n  const [orders, setOrders] = useState([]);\r\n\r\n  const statusMap = {\r\n    AWAITING: 'Aguardando',\r\n    WASHING: 'Em lavagem',\r\n    READY: 'Pronto',\r\n    FINISHED: 'Finalizado',\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchEmployees();\r\n  }, []);\r\n\r\n  const fetchEmployees = async () => {\r\n    try {\r\n      const { data } = await axios.get('/api/employees');\r\n      setEmployees(data);\r\n    } catch (err) {\r\n      setEmployees([]);\r\n    }\r\n  };\r\n\r\n  const fetchOrders = async (employeeId) => {\r\n    try {\r\n      const { data } = await axios.get(`/api/orders?employeeId=${employeeId}`);\r\n      setOrders(data);\r\n    } catch (err) {\r\n      setOrders([]);\r\n    }\r\n  };\r\n\r\n  const handleSelectEmployee = (e) => {\r\n    const empId = e.target.value;\r\n    setSelectedEmployee(empId);\r\n    if (empId) fetchOrders(empId);\r\n    else setOrders([]);\r\n  };\r\n\r\n  return (\r\n    <div className=\"employee-page-container\">\r\n      <h2>Funcionários</h2>\r\n      <label>Selecione um funcionário:</label>\r\n      <select value={selectedEmployee || ''} onChange={handleSelectEmployee} style={{ marginBottom: 24 }}>\r\n        <option value=\"\">-- Selecione --</option>\r\n        {employees.map(emp => (\r\n          <option key={emp.id} value={emp.id}>{emp.name}</option>\r\n        ))}\r\n      </select>\r\n      {selectedEmployee && (\r\n        <table className=\"services-table\">\r\n          <thead>\r\n            <tr>\r\n              <th>Veículo</th>\r\n              <th>Valor do Serviço</th>\r\n              <th>Ganho Funcionário</th>\r\n              <th>Status</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {orders.map(order => (\r\n              <tr key={order.id}>\r\n                <td>{order.vehicle?.model} ({order.vehicle?.plate})</td>\r\n                <td>R$ {order.totalPrice.toFixed(2)}</td>\r\n                <td>\r\n                  {order.employee ? `R$ ${(order.totalPrice * (order.employee.percentage / 100)).toFixed(2)} (${order.employee.percentage}%)` : '-'}\r\n                </td>\r\n                <td>{statusMap[order.status] || order.status}</td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EmployeePage; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}